#!/usr/bin/env node

const cli = require('commander');
const glob = require('globby');

require('../lib/hooks');
const runner = require('../lib/runner');
const { description, version } = require('../package.json');

cli.version(version)
  .description(description)
  .usage('api-bench-runner <path>')
  .action(pattern => (
    glob(pattern, { realpath: true })
      // eslint-disable-next-line global-require, import/no-dynamic-require
      .then(paths => paths.map(file => require(file)))
      .then(() => runner.run())
  ))
  .parse(process.argv);
